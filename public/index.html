<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>ClassConnect</title>
    <meta name="description" content="ClassConnect messaging" />
    <meta name="author" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Minimal, critical CSS to avoid flash before React mounts.
         Default is light theme (no flash to white). If user previously chose a theme,
         this script will set it synchronously before the bundle runs. -->
    <style>
      :root {
        --bg-light: #f3f6fb;
        --bg-dark: #0f1720;
      }

      /* Default body background (light) so page doesn't flash white */
      html, body {
        height: 100%;
        margin: 0;
        background: var(--bg-light);
      }

      /* When theme has been set to dark on the root element, apply dark bg immediately */
      html[data-theme="dark"], body[data-theme="dark"] {
        background: var(--bg-dark);
      }

      /* Ensure the root mounting element is full size so the app can render fullscreen immediately */
      #root {
        width: 100vw;
        height: 100vh;
      }

      /* Prefer reduced-flash by using color-scheme when possible */
      html[data-theme="dark"] {
        color-scheme: dark;
      }
      html:not([data-theme="dark"]) {
        color-scheme: light;
      }
    </style>

    <script>
      // Synchronously set initial theme before the app bundle loads.
      // Default to "light" (as you requested). If a saved preference exists in localStorage,
      // apply it instead.
      (function () {
        try {
          var saved = localStorage.getItem("cc:theme");
          var theme = saved === "dark" ? "dark" : "light";
          document.documentElement.setAttribute("data-theme", theme);
          // also set on body for extra coverage
          document.body.setAttribute("data-theme", theme);
        } catch (e) {
          // ignore errors and leave default light
        }
      })();
    </script>

    <!-- keep your existing vendor CSS if you use it -->
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/skeleton.css" />
    <link rel="stylesheet" href="styles.css" />

    <link rel="icon" type="image/ico" href="favicon.ico" />
  </head>

  <body>
    <div id="root"></div>

    <noscript>
      <div style="padding:12px; text-align:center; background:#ffecec; color:#611a15;">
        This app requires JavaScript. Please enable JavaScript in your browser.
      </div>
    </noscript>

    <!-- Your compiled bundle -->
    <script type="module" src="/dist/index.js"></script>
  </body>
</html>
